# 혼밥시러 (HonbabnoNo) - 모임 매칭 플랫폼

혼자 먹기 싫은 사람들을 위한 모임 매칭 플랫폼입니다.

## 🚀 프로젝트 개요

혼밥시러는 혼자 식사하기 싫어하는 사람들이 함께 식사할 수 있도록 모임을 만들고 참여할 수 있는 플랫폼입니다.

### 주요 기능
- 🍽️ 모임 생성 및 참여
- 💬 실시간 채팅
- 💰 약속금 시스템 (포인트/카카오페이/카드결제)
- 🗺️ 지도 기반 위치 선택
- ⭐ 밥알지수 (신뢰도 시스템)
- 📝 참여자 리뷰 시스템

## 🏗️ 기술 스택

### Frontend
- **React Native**: 크로스 플랫폼 모바일 앱
- **React**: 웹 버전
- **TypeScript**: 타입 안정성
- **React Navigation**: 네비게이션
- **Zustand**: 상태 관리

### Backend
- **Node.js**: 백엔드 서버
- **Express**: 웹 프레임워크
- **PostgreSQL**: 데이터베이스
- **JWT**: 인증 시스템

### 외부 서비스
- **카카오 로그인 API**: 소셜 로그인
- **카카오맵 API**: 지도 및 위치 서비스
- **카카오페이 API**: 결제 서비스

## 📋 비즈니스 정책 및 요구사항

### 1. 모임 취소/환불 정책

#### 사용자 자발적 취소
- **모임 시작 1시간 전까지**: 약속금 전액 환불
- **직전 취소 (패널티)**:
  - 40분 전: 약속금 60% 환불
  - 20분 전: 약속금 30% 환불
  - 10분 전: 약속금 환불 불가

#### 시스템 취소
- **특정 인원이 차지 않아 모임이 취소되는 경우**: 전원 전액 환불
- **시스템 오류로 인한 취소**: 전원 전액 환불

#### 잦은 취소 제재
- **3회 이상 연속 취소**: 일정 기간 모임 생성/참여 제한 조치

### 2. 모임 확정 정책

#### 모임장 권한
- **최소 인원 달성 시**: 모임장이 수동으로 확정 가능
  - 예: 4명 모임에서 2명만 모여도 모임장 판단하에 확정 가능
- **확정된 모임**: 무조건 진행되며, 취소 시 패널티 적용

#### 자동 확정 조건
- 최대 인원 달성 시 자동 확정
- 모임 시작 1시간 전 자동 확정

### 3. 위치 관리 정책

#### 표준 위치
- **기본 모임 장소**: 강남역 1번 출구 (좌표: 37.498095, 127.027610)
- **기존 모임**: 모두 강남역 1번 출구로 표준화 완료

#### 위치 선택 방법
- **검색 기능**: 주소/장소명으로 검색
- **지도 클릭**: 직접 지도에서 위치 선택
- **직접 입력 기능**: 제거됨 (2024.11.18)

### 4. 결제 시스템

#### 지원 결제 방법
- **포인트 결제**: 보유 포인트로 즉시 결제
- **카카오페이**: 외부 결제 창 연동
- **카드 결제**: 신용카드/체크카드

#### 약속금 정책
- **기본 금액**: 3,000원
- **환불 정책**: 상기 취소 정책에 따름
- **보증금 성격**: 노쇼 방지용, 모임 완료 후 1일 이내 환불

### 5. 신뢰도 시스템 (밥알지수)

#### 계산 요소
- 참여 모임 수
- 호스팅 모임 수
- 완료한 모임 수
- 받은 리뷰 점수
- 취소 이력

#### 등급 시스템 (6단계)
| 밥알지수 | 등급 | 이모지 | 색상 | 설명 |
|---------|------|--------|------|------|
| 90+ | 밥신 | 🍚👑 | #FF6B6B (빨간색) | 최고급 회원 |
| 80+ | 밥마스터 | 🍚⭐ | #FF9500 (주황색) | 고급 회원 |
| 70+ | 따끈한 밥그릇 | 🍚🔥 | #F5B041 (황금색) | 중급 회원 |
| 50+ | 든든한 밥그릇 | 🍚💪 | #28A745 (초록색) | 초급 회원 |
| 30+ | 새내기 밥그릇 | 🍚🌱 | #007BFF (파란색) | 새싹 회원 |
| <30 | 밥알 초보 | 🍚👶 | #6C757D (회색) | 시작 단계 |

#### 밥알지수 계산 알고리즘
- **기본 점수**: 20점
- **모임 참여**: +5점/회 (최대 40점)
- **모임 주최**: +10점/회 (최대 30점)  
- **리뷰 점수**: (평균 별점 - 3) × 10점
- **완료율 보너스**: (완료한 모임 수 / 총 참여 모임 수) × 20점
- **취소 패널티**: -10점/회

### 6. 뱃지 시스템 🏆

#### 뱃지 목록 및 획득 조건

| 뱃지명 | 이모지 | 설명 | 획득 조건 |
|--------|--------|------|----------|
| 첫 모임 | 🌟 | 첫 번째 모임 참여 | 1회 이상 모임 참여 완료 |
| 모임왕 | 👑 | 10회 이상 모임 참여 | 10회 이상 모임 참여 완료 |
| 호스트 | 🏠 | 모임 개최하기 | 1회 이상 모임 주최 완료 |
| 리뷰어 | ✍️ | 리뷰 10개 이상 작성 | 10개 이상 리뷰 작성 |
| 밥친구 | 👥 | 같은 사람과 3회 모임 | 동일인과 3회 이상 함께 모임 |
| 탐험가 | 🗺️ | 5개 지역 모임 참여 | 서로 다른 5개 지역에서 모임 참여 |

#### 뱃지 획득 시스템
- **자동 획득**: API 호출 시 조건 확인 후 자동 부여
- **중복 방지**: 동일 뱃지는 최초 1회만 획득
- **실시간 업데이트**: 마이페이지 접속 시 최신 상태로 업데이트
- **뱃지 알림**: 새로 획득한 뱃지 실시간 알림 (구현 예정)

#### API 엔드포인트
```
GET /api/user/badges - 사용자 뱃지 목록 조회
```

**응답 예시:**
```json
{
  "success": true,
  "badges": [
    {
      "id": "first_meetup",
      "title": "첫 모임", 
      "emoji": "🌟",
      "description": "첫 번째 모임 참여",
      "earned": true,
      "earnedAt": "2024-11-24T12:00:00.000Z"
    }
  ],
  "newBadges": [] // 새로 획득한 뱃지
}
```

## 🎨 UI/UX 요구사항

### 모임 상세 페이지 하단 버튼
- **참여자/호스트**: 
  - 왼쪽 2/3: "💬 채팅방" 버튼
  - 오른쪽 1/3: "모임확정"/"모임취소" 버튼 (호스트만)
  - 오른쪽 1/3: "참여취소" 버튼 (참가자만)
- **미참여자**: 
  - 전체: "같이먹기" 버튼

### 지도 표시
- 모임 상세 페이지에서 해당 위치에 마커 표시 필수
- 마커 클릭 시 위치명 인포윈도우 표시

## 🗄️ 데이터베이스 스키마

### 주요 테이블
- `users`: 사용자 정보
- `meetups`: 모임 정보
- `meetup_participants`: 참여자 정보
- `promise_deposits`: 약속금 정보
- `user_points`: 포인트 정보
- `point_transactions`: 포인트 거래 내역
- `user_badges`: 사용자 뱃지 정보
- `chat_rooms`: 채팅방 정보
- `chat_messages`: 채팅 메시지

### 모임 상태 (meetups.status)
- `active`: 활성 모집 중
- `confirmed`: 확정된 모임
- `completed`: 완료된 모임
- `cancelled`: 취소된 모임

## 🚀 개발 환경 설정

### 필수 요구사항
- Node.js 16+
- React Native CLI
- PostgreSQL
- 카카오 API 키 설정

### 환경변수 설정
```env
DB_HOST=your_db_host
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_NAME=honbabnono
KAKAO_API_KEY=your_kakao_api_key
JWT_SECRET=your_jwt_secret
```

### 설치 및 실행
```bash
# 의존성 설치
npm install

# 웹 개발 서버 실행
npm run web

# 백엔드 서버 실행 (포트 3001)
PORT=3001 npm run server

# 모바일 앱 실행
npm run android  # Android
npm run ios      # iOS
```

## 📱 앱 접속 방법

### 개발 환경
- **웹**: http://localhost:3000
- **API**: http://localhost:3001
- **데이터베이스**: PostgreSQL on AWS RDS

### 주요 페이지
- `/home`: 홈 화면
- `/create-meetup`: 모임 생성
- `/meetup-list`: 모임 목록
- `/meetup/:id`: 모임 상세
- `/chat/:id`: 채팅방
- `/profile`: 프로필

## 🔄 최근 업데이트 내역

### 2024.11.24
- 🏆 뱃지 시스템 구현 (6가지 뱃지)
- 📊 밥알지수 6단계 등급 시스템 개선
- 🎨 마이페이지 UI 리뉴얼
  - 프로필 레이아웃 개선 (왼쪽 작은 프로필 + 오른쪽 상세 정보)
  - 밥알지수별 색상 시스템 적용
  - 다음 레벨까지 진행 상황 표시
  - 뱃지 크기 최적화 및 획득 상태 표시
- 🔧 데이터베이스 스키마 확장 (user_badges 테이블 추가)

### 2024.11.18
- ♻️ 위치 선택 직접 입력 기능 제거
- 🗺️ 모임 상세 페이지 지도 마커 표시 개선
- 📍 기존 모임 위치 강남역 1번 출구로 표준화
- 💰 약속금 결제 시스템 통합

## 🤝 개발 규칙

### 커밋 메시지 규칙
- ✨ feat: 새로운 기능 추가
- 🐛 fix: 버그 수정
- ♻️ refactor: 코드 리팩토링
- 🗺️ map: 지도 관련 기능
- 💰 payment: 결제 관련 기능
- 📱 ui: UI/UX 개선
- 📝 docs: 문서 업데이트

### 코드 스타일
- TypeScript 사용 필수
- ESLint/Prettier 규칙 준수
- 컴포넌트명은 PascalCase
- 함수명은 camelCase

## 📞 문의 및 지원

개발 관련 문의사항이나 버그 리포트는 이슈로 등록해주세요.

---

**Generated with Claude Code** 🤖